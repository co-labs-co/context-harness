{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"ContextHarness","text":"<p>Context-aware agent framework for OpenCode and Claude Code that maintains session continuity.</p>"},{"location":"#what-is-contextharness","title":"What is ContextHarness?","text":"<p>ContextHarness solves a fundamental problem with AI coding assistants: context loss. When you're working on a feature across multiple sessions, you lose all the context from previous conversations\u2014the decisions made, files modified, documentation referenced, and progress achieved.</p> <p>ContextHarness maintains a <code>SESSION.md</code> file for each feature/task you work on. When you run <code>/compact</code>, your current work context is saved. When you switch sessions with <code>/ctx</code>, the previous context is preserved and the new session's context is loaded.</p>"},{"location":"#supported-tools","title":"Supported Tools","text":"<p>ContextHarness works with both major AI coding assistants:</p> Tool Description OpenCode Open-source AI coding assistant Claude Code Anthropic's VS Code extension and CLI <p>By default, ContextHarness installs support for both tools simultaneously, allowing you to use whichever fits your workflow.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<pre><code># Install (one-time)\nuv tool install \"git+https://github.com/co-labs-co/context-harness.git\"\n\n# Initialize in your project\nch init                    # or: context-harness init\n</code></pre> OpenCodeClaude Code <pre><code># Open OpenCode and start working\n/baseline              # Analyze project (first time)\n/ctx my-feature        # Create session + branch\n# ... do your work ...\n/compact               # Save context\n/pr                    # Create pull request\n</code></pre> <pre><code># Open Claude Code and start working\n/baseline              # Analyze project (first time)\n/ctx my-feature        # Create session + branch\n# ... do your work ...\n/compact               # Save context\n/pr                    # Create pull request\n</code></pre> <p>That's it. Your context persists across sessions.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Session Management: Named sessions (feature branches, ticket IDs) with persistent context</li> <li>Automatic Compaction: Context is saved every 2nd user interaction</li> <li>GitHub Integration: Automatic branch creation, issue tracking, PR creation</li> <li>Subagent System: Research and documentation lookup via Context7 MCP</li> <li>Skill System: Install, upgrade, and manage pre-built patterns and workflows \u2014 with custom registry support</li> </ul>"},{"location":"#how-it-differs-from-other-approaches","title":"How It Differs from Other Approaches","text":"Approach Limitation ContextHarness Solution Single long conversation Context window overflow Incremental compaction to SESSION.md Starting fresh each time Lose all context Named sessions persist across conversations Manual note-taking Easy to forget, inconsistent Structured SESSION.md with guided compaction Multiple agents executing Conflicts, confusion Single executor with advisory subagents"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation \u2014 Get ContextHarness set up</li> <li>Quick Start \u2014 Start your first session</li> <li>Commands Reference \u2014 All available commands</li> </ul>"},{"location":"agent-install/","title":"context-harness","text":"<p>Context-aware agent framework for OpenCode.ai that maintains session continuity across conversations.</p> <p>If you're an LLM agent (Claude Code or opencode) helping a user install ContextHarness, welcome! Execute these steps autonomously.</p> <p>OBJECTIVE: Install the <code>ch</code> CLI tool and initialize it in the user's project.</p> <p>DONE WHEN: Running <code>ch --version</code> outputs a version number AND <code>ch init</code> completes successfully.</p>"},{"location":"agent-install/#todo","title":"TODO","text":"<ul> <li>[ ] Verify Python 3.9+ is installed</li> <li>[ ] Install uv package manager (if missing)</li> <li>[ ] Install context-harness via uv</li> <li>[ ] Verify CLI installation</li> <li>[ ] Initialize in project directory</li> <li>[ ] Confirm success to user</li> </ul>"},{"location":"agent-install/#step-1-check-python-version","title":"Step 1: Check Python Version","text":"<p>Run this command to check the Python version:</p> <pre><code>python3 --version\n</code></pre> <p>Requirement: Python 3.9 or higher.</p> <ul> <li>If version is 3.9+: Continue to Step 2</li> <li>If version is below 3.9 or command not found: STOP and tell the user: <p>\"ContextHarness requires Python 3.9 or higher. Please install or upgrade Python before continuing.\" - macOS: <code>brew install python@3.12</code> - Ubuntu/Debian: <code>sudo apt install python3.12</code> - Windows: Download from https://python.org</p> </li> </ul>"},{"location":"agent-install/#step-2-install-uv-package-manager-if-needed","title":"Step 2: Install uv Package Manager (if needed)","text":"<p>Check if uv is already installed:</p> <pre><code>uv --version\n</code></pre> <ul> <li>If uv is installed (outputs version): Continue to Step 3</li> <li>If uv is NOT installed (command not found): Install it using the appropriate command:</li> </ul> <p>macOS / Linux: <pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh\n</code></pre></p> <p>Windows (PowerShell): <pre><code>powershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n</code></pre></p> <p>After installation, the shell may need to be restarted or PATH updated. Try: <pre><code>source ~/.bashrc   # Linux\nsource ~/.zshrc    # macOS with zsh\n# Or restart the terminal\n</code></pre></p> <p>Verify uv is now available: <pre><code>uv --version\n</code></pre></p>"},{"location":"agent-install/#step-3-install-contextharness","title":"Step 3: Install ContextHarness","text":"<p>Install the CLI globally using uv:</p> <pre><code>uv tool install \"git+https://github.com/co-labs-co/context-harness.git\"\n</code></pre> <p>This installs both the <code>context-harness</code> and <code>ch</code> commands (they are identical).</p> <p>Expected output: Installation success message with no errors.</p> <p>If you see a PATH warning: The uv tool directory may not be in PATH. Add it: <pre><code>export PATH=\"$HOME/.local/bin:$PATH\"\n</code></pre></p>"},{"location":"agent-install/#step-4-verify-cli-installation","title":"Step 4: Verify CLI Installation","text":"<pre><code>ch --version\n</code></pre> <p>Expected output: A version string like <code>context-harness 0.x.x</code></p> <ul> <li>If version is displayed: Continue to Step 5</li> <li>If command not found: Check that <code>~/.local/bin</code> is in PATH, then retry</li> </ul>"},{"location":"agent-install/#step-5-initialize-in-project-directory","title":"Step 5: Initialize in Project Directory","text":"<p>Navigate to the user's project directory (if not already there), then run:</p> <pre><code>ch init\n</code></pre> <p>What this creates: - <code>.context-harness/</code> \u2014 Session storage directory - <code>.opencode/agent/</code> \u2014 Agent definitions for OpenCode - <code>.opencode/command/</code> \u2014 Slash command definitions</p> <p>Expected output: Success message indicating files were created.</p> <p>Options (if needed): - <code>ch init --force</code> \u2014 Overwrite existing files - <code>ch init --target ./path</code> \u2014 Install in a specific directory</p>"},{"location":"agent-install/#step-6-success-confirmation","title":"Step 6: Success Confirmation","text":"<p>If all steps completed successfully, tell the user:</p> <p>ContextHarness installed successfully!</p> <ul> <li>CLI version: [version from step 4]</li> <li>Project initialized: <code>.context-harness/</code> directory created</li> </ul> <p>Next steps: 1. Run <code>/baseline</code> in OpenCode to analyze your project 2. Run <code>/ctx my-feature</code> to start your first session</p> <p>See the documentation for more details.</p>"},{"location":"agent-install/#troubleshooting","title":"Troubleshooting","text":""},{"location":"agent-install/#command-not-found-ch","title":"\"command not found: ch\"","text":"<p>The uv tool bin directory is not in PATH. Fix with:</p> <pre><code># Add to PATH (add this to your shell profile for persistence)\nexport PATH=\"$HOME/.local/bin:$PATH\"\n\n# Then verify\nch --version\n</code></pre>"},{"location":"agent-install/#python-version-too-old","title":"\"Python version too old\"","text":"<p>Install a newer Python version: - macOS: <code>brew install python@3.12</code> - Ubuntu/Debian: <code>sudo apt install python3.12</code> - Windows: Download from https://python.org</p>"},{"location":"agent-install/#permission-denied-errors","title":"\"Permission denied\" errors","text":"<p>Ensure you're not running as root. uv tools install to the user's home directory.</p>"},{"location":"agent-install/#uv-command-not-found-after-installation","title":"\"uv: command not found\" after installation","text":"<p>The installer may have added uv to a PATH that isn't loaded. Try: <pre><code>source ~/.bashrc  # or ~/.zshrc, ~/.profile\n</code></pre></p> <p>Or restart your terminal/shell.</p>"},{"location":"agent-install/#already-have-context-harness-installed","title":"Already have context-harness installed?","text":"<p>To upgrade to the latest version: <pre><code>uv tool upgrade context-harness\n</code></pre></p> <p>To uninstall: <pre><code>uv tool uninstall context-harness\n</code></pre></p>"},{"location":"agent-install/#optional-add-mcp-servers","title":"Optional: Add MCP Servers","text":"<p>For enhanced documentation lookup features, add Context7:</p> <pre><code>ch mcp add context7\n</code></pre> <p>For higher rate limits, add with an API key: <pre><code>ch mcp add context7 -k YOUR_API_KEY\n</code></pre></p>"},{"location":"agent-install/#optional-verify-github-integration","title":"Optional: Verify GitHub Integration","text":"<p>If the user wants GitHub features (<code>/issue</code>, <code>/pr</code>, <code>/ctx</code> branch creation), verify <code>gh</code> CLI:</p> <pre><code>gh auth status\n</code></pre> <ul> <li>If authenticated: GitHub features will work</li> <li>If not authenticated: Run <code>gh auth login</code> or inform user that GitHub features require authentication</li> </ul> <p>EXECUTE NOW: Complete the TODO list above. Goal: <code>ch --version</code> outputs a version AND <code>ch init</code> succeeds in the user's project directory.</p>"},{"location":"contributing/","title":"Contributing","text":"<p>Contributions are welcome! Here's how to get started.</p>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<ol> <li>Clone the repository:</li> </ol> <pre><code>git clone https://github.com/co-labs-co/context-harness.git\ncd context-harness\n</code></pre> <ol> <li>Install dependencies:</li> </ol> <pre><code>uv sync --group dev --group docs\n</code></pre> <ol> <li>Run tests:</li> </ol> <pre><code>uv run pytest\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":""},{"location":"contributing/#local-development","title":"Local Development","text":"<p>Start the documentation server:</p> <pre><code>uv run mkdocs serve\n</code></pre> <p>Visit http://127.0.0.1:8000 to preview changes.</p>"},{"location":"contributing/#building","title":"Building","text":"<pre><code>uv run mkdocs build\n</code></pre> <p>Output is in the <code>site/</code> directory.</p>"},{"location":"contributing/#project-structure","title":"Project Structure","text":"<pre><code>context-harness/\n\u251c\u2500\u2500 src/context_harness/\n\u2502   \u251c\u2500\u2500 primitives/         # Domain models (dataclasses, enums, Result[T])\n\u2502   \u2502   \u251c\u2500\u2500 base.py         # Result[T] = Success | Failure, ErrorCode\n\u2502   \u2502   \u251c\u2500\u2500 config.py       # Configuration primitives\n\u2502   \u2502   \u251c\u2500\u2500 installer.py    # InstallResult enum\n\u2502   \u2502   \u251c\u2500\u2500 mcp.py          # MCP server primitives\n\u2502   \u2502   \u251c\u2500\u2500 skill.py        # Skill, VersionComparison, RegistryRepo\n\u2502   \u2502   \u2514\u2500\u2500 tool.py         # ToolType, ToolDetector, ToolTarget\n\u2502   \u251c\u2500\u2500 services/           # Business logic (uses Result[T] pattern)\n\u2502   \u2502   \u251c\u2500\u2500 config_service.py   # Configuration management\n\u2502   \u2502   \u2514\u2500\u2500 skill_service.py    # Skill operations (install, upgrade, init-repo)\n\u2502   \u251c\u2500\u2500 interfaces/         # CLI/SDK entry points\n\u2502   \u2502   \u2514\u2500\u2500 cli/\n\u2502   \u2502       \u251c\u2500\u2500 skill_cmd.py    # Click commands for skill management\n\u2502   \u2502       \u2514\u2500\u2500 config_cmd.py   # Click commands for configuration\n\u2502   \u251c\u2500\u2500 cli.py              # CLI entry point (registers command groups)\n\u2502   \u251c\u2500\u2500 installer.py        # Framework installation logic\n\u2502   \u251c\u2500\u2500 mcp_config.py       # MCP server configuration\n\u2502   \u2514\u2500\u2500 templates/          # Agent and command templates\n\u251c\u2500\u2500 tests/                  # Test suite\n\u2502   \u2514\u2500\u2500 unit/\n\u2502       \u251c\u2500\u2500 services/       # Service unit tests\n\u2502       \u2514\u2500\u2500 interfaces/cli/ # CLI integration tests\n\u251c\u2500\u2500 docs/                   # Documentation source\n\u251c\u2500\u2500 mkdocs.yml              # MkDocs configuration\n\u2514\u2500\u2500 pyproject.toml          # Project configuration\n</code></pre>"},{"location":"contributing/#architecture-primitives-services-interfaces","title":"Architecture: Primitives \u2192 Services \u2192 Interfaces","text":"<p>The codebase follows a three-layer architecture:</p> <ol> <li>Primitives (<code>primitives/</code>): Pure data models using <code>@dataclass</code> and <code>Enum</code>. No business logic. Includes <code>Result[T] = Union[Success[T], Failure]</code> for explicit error handling.</li> <li>Services (<code>services/</code>): Business logic that operates on primitives. Uses Protocol-based dependency injection for testability.</li> <li>Interfaces (<code>interfaces/</code>): CLI commands (Click) and SDK clients that call services. Handle user I/O and formatting only.</li> </ol>"},{"location":"contributing/#guidelines","title":"Guidelines","text":""},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Use type hints</li> <li>Follow PEP 8</li> <li>Write docstrings for public functions</li> </ul>"},{"location":"contributing/#commits","title":"Commits","text":"<p>We use Conventional Commits:</p> <ul> <li><code>feat:</code> \u2014 New feature</li> <li><code>fix:</code> \u2014 Bug fix</li> <li><code>docs:</code> \u2014 Documentation changes</li> <li><code>chore:</code> \u2014 Maintenance tasks</li> </ul>"},{"location":"contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li>Create a feature branch: <code>git checkout -b feature/my-feature</code></li> <li>Make your changes</li> <li>Run tests: <code>uv run pytest</code></li> <li>Create a PR with a clear description</li> </ol>"},{"location":"contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the GNU AGPLv3.</p>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<p>Required:</p> <ul> <li>uv \u2014 Python package installer</li> </ul> <p>At least one of:</p> <ul> <li>OpenCode \u2014 Open-source AI coding assistant</li> <li>Claude Code \u2014 Anthropic's VS Code extension or CLI</li> </ul> <p>Recommended:</p> <ul> <li>Git \u2014 Version control (required for <code>/baseline --path</code> to properly locate repository root)</li> </ul> <p>Optional:</p> <ul> <li>GitHub CLI <code>gh</code> \u2014 For <code>/issue</code>, <code>/pr</code>, <code>/ctx</code> branch creation</li> <li>Context7 MCP \u2014 For research features via <code>@research-subagent</code></li> </ul>"},{"location":"getting-started/installation/#install-with-uv","title":"Install with uv","text":"<p>The recommended way to install ContextHarness:</p> <pre><code># Install globally\nuv tool install \"git+https://github.com/co-labs-co/context-harness.git\"\n</code></pre> <p>Or run without installing:</p> <pre><code>uvx --from \"git+https://github.com/co-labs-co/context-harness.git\" ch init\n</code></pre>"},{"location":"getting-started/installation/#initialize-in-your-project","title":"Initialize in Your Project","text":"<p>Navigate to your project directory and run:</p> <pre><code>ch init\n</code></pre>"},{"location":"getting-started/installation/#tool-selection","title":"Tool Selection","text":"<p>By default, ContextHarness installs support for both OpenCode and Claude Code. You can choose a specific tool:</p> Both Tools (Default)OpenCode OnlyClaude Code Only <pre><code>ch init\n# or explicitly:\nch init --tool both\n</code></pre> <p>Creates configurations for both tools:</p> <ul> <li><code>.opencode/</code> \u2014 OpenCode agents and commands</li> <li><code>.claude/</code> \u2014 Claude Code agents and commands</li> <li><code>opencode.json</code> \u2014 OpenCode configuration</li> <li><code>.mcp.json</code> \u2014 Claude Code MCP configuration</li> <li><code>AGENTS.md</code> \u2014 OpenCode memory file</li> <li><code>CLAUDE.md</code> \u2014 Claude Code memory file</li> </ul> <pre><code>ch init --tool opencode\n</code></pre> <p>Creates:</p> <ul> <li><code>.opencode/agent/</code> \u2014 Agent definitions</li> <li><code>.opencode/command/</code> \u2014 Slash commands</li> <li><code>.opencode/skill/</code> \u2014 Installed skills</li> <li><code>opencode.json</code> \u2014 Configuration file</li> <li><code>AGENTS.md</code> \u2014 Memory file</li> </ul> <pre><code>ch init --tool claude-code\n</code></pre> <p>Creates:</p> <ul> <li><code>.claude/agents/</code> \u2014 Agent definitions</li> <li><code>.claude/commands/</code> \u2014 Slash commands</li> <li><code>.claude/skills/</code> \u2014 Installed skills</li> <li><code>.mcp.json</code> \u2014 MCP configuration</li> <li><code>CLAUDE.md</code> \u2014 Memory file</li> </ul> <p>Folder Naming Differences</p> <p>OpenCode uses singular folder names (<code>agent/</code>, <code>command/</code>, <code>skill/</code>), while Claude Code uses plural names (<code>agents/</code>, <code>commands/</code>, <code>skills/</code>).</p>"},{"location":"getting-started/installation/#shared-session-storage","title":"Shared Session Storage","text":"<p>Regardless of which tool you use, sessions are stored in a shared location:</p> <pre><code>.context-harness/\n\u251c\u2500\u2500 sessions/                  # Named session directories\n\u2502   \u2514\u2500\u2500 {session-name}/\n\u2502       \u2514\u2500\u2500 SESSION.md\n\u251c\u2500\u2500 templates/\n\u2502   \u2514\u2500\u2500 session-template.md\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"getting-started/installation/#options","title":"Options","text":"<pre><code>ch init --force          # Overwrite existing files (preserves sessions and skills)\nch init --target ./path  # Install in specific directory\nch init --tool opencode  # Install for OpenCode only\nch init --tool claude-code  # Install for Claude Code only\nch init --tool both      # Install for both tools (default)\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"<pre><code># Check CLI is available\nch --version\n\n# Verify GitHub CLI (optional)\ngh auth status\n</code></pre> <p>Tip: Both <code>ch</code> and <code>context-harness</code> commands work identically. Use <code>ch</code> for convenience.</p>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start \u2014 Start your first session</li> <li>Context7 MCP Setup \u2014 Enable research features</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>This guide walks you through your first ContextHarness session.</p>"},{"location":"getting-started/quickstart/#1-analyze-your-project-first-time-only","title":"1. Analyze Your Project (First Time Only)","text":"OpenCodeClaude Code <p>Open OpenCode in your project directory and run:</p> <pre><code>/baseline\n</code></pre> <p>Open Claude Code in your project directory and run:</p> <pre><code>/baseline\n</code></pre> <p>This analyzes your codebase and generates:</p> OpenCodeClaude Code <ul> <li><code>PROJECT-CONTEXT.md</code> \u2014 Information about your project's structure, patterns, and conventions</li> <li><code>AGENTS.md</code> \u2014 AI agent instructions for working with your codebase</li> </ul> <ul> <li><code>PROJECT-CONTEXT.md</code> \u2014 Information about your project's structure, patterns, and conventions</li> <li><code>CLAUDE.md</code> \u2014 AI agent instructions for working with your codebase</li> </ul> <p>Working in a Monorepo?</p> <p>Use <code>--path</code> to analyze specific projects: <pre><code>/baseline --path apps/frontend\n</code></pre> This generates <code>apps/frontend/PROJECT-CONTEXT.md</code> and the appropriate memory file for that specific project.</p>"},{"location":"getting-started/quickstart/#2-start-a-session","title":"2. Start a Session","text":"<pre><code>/ctx login-feature\n</code></pre> <p>This:</p> <ul> <li>Creates a new session at <code>.context-harness/sessions/login-feature/</code></li> <li>Creates a git branch <code>feature/login-feature</code> (if <code>gh</code> is available)</li> <li>Initializes <code>SESSION.md</code> for tracking your work</li> </ul>"},{"location":"getting-started/quickstart/#3-do-your-work","title":"3. Do Your Work","text":"<p>Work on your feature as usual. The agent will:</p> <ul> <li>Track modified files</li> <li>Record important decisions</li> <li>Save documentation references</li> </ul>"},{"location":"getting-started/quickstart/#4-save-your-context","title":"4. Save Your Context","text":"<p>Manually save your progress:</p> <pre><code>/compact\n</code></pre> <p>Automatic Compaction</p> <p>ContextHarness automatically compacts every 2nd user interaction, so you don't always need to run this manually.</p>"},{"location":"getting-started/quickstart/#5-create-a-pull-request","title":"5. Create a Pull Request","text":"<p>When you're done:</p> <pre><code>/pr\n</code></pre> <p>This creates a GitHub PR with:</p> <ul> <li>Summary from your session context</li> <li>List of changes</li> <li>Link to related issue (if created with <code>/issue</code>)</li> </ul>"},{"location":"getting-started/quickstart/#typical-workflow","title":"Typical Workflow","text":"OpenCodeClaude Code <pre><code>/ctx login-feature          # Start session + branch\n# ... work on login ...\n/compact                    # Save progress (optional)\n# ... more work ...\n/issue                      # Create GitHub issue from context\n# ... finish feature ...\n/pr                         # Create pull request\n</code></pre> <pre><code>/ctx login-feature          # Start session + branch\n# ... work on login ...\n/compact                    # Save progress (optional)\n# ... more work ...\n/issue                      # Create GitHub issue from context\n# ... finish feature ...\n/pr                         # Create pull request\n</code></pre> <p>Same Commands, Same Workflow</p> <p>ContextHarness commands work identically in both OpenCode and Claude Code. The only differences are the folder structure and configuration files.</p>"},{"location":"getting-started/quickstart/#switching-sessions","title":"Switching Sessions","text":"<p>You can work on multiple features:</p> <pre><code>/ctx login-feature          # Work on login\n/ctx api-refactor           # Switch to API work (login context saved)\n/contexts                   # List all sessions\n/ctx login-feature          # Return to login (context restored)\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Commands Reference \u2014 All available commands</li> <li>Sessions \u2014 Deep dive into session management</li> </ul>"},{"location":"reference/architecture/","title":"Architecture","text":"<p>ContextHarness uses a single-executor model with advisory subagents. It supports both OpenCode and Claude Code with tool-specific configurations.</p>"},{"location":"reference/architecture/#system-overview","title":"System Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    CONTEXT-HARNESS AGENT                     \u2502\n\u2502                                                              \u2502\n\u2502  \u2022 Executes ALL work (code, files, commands)                 \u2502\n\u2502  \u2022 Manages named sessions                                    \u2502\n\u2502  \u2022 Reads/writes SESSION.md                                   \u2502\n\u2502  \u2022 Invokes subagents for guidance only                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502                                \u2502\n                \u2502                                \u2502\n                \u25bc                                \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Research &amp; Docs Subagents    \u2502  \u2502   Compaction Guide        \u2502\n\u2502                               \u2502  \u2502   Subagent                \u2502\n\u2502  @research-subagent           \u2502  \u2502                           \u2502\n\u2502  @docs-subagent               \u2502  \u2502  \u2022 Analyze session        \u2502\n\u2502                               \u2502  \u2502  \u2022 Recommend what to      \u2502\n\u2502  \u2022 Context7 MCP access        \u2502  \u2502    preserve               \u2502\n\u2502  \u2022 Web search verification    \u2502  \u2502  \u2022 NO execution           \u2502\n\u2502  \u2022 Provide guidance           \u2502  \u2502                           \u2502\n\u2502  \u2022 Return recommendations     \u2502  \u2502                           \u2502\n\u2502  \u2022 NO execution               \u2502  \u2502                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"reference/architecture/#key-principles","title":"Key Principles","text":"<ol> <li>Single Executor: Only the primary agent writes code, modifies files, and runs commands</li> <li>Advisory Subagents: Subagents provide guidance but never execute</li> <li>Persistent Context: SESSION.md maintains state across conversations</li> <li>Incremental Compaction: Context is saved every 2nd user interaction</li> <li>Dual-Tool Support: Works with both OpenCode and Claude Code simultaneously</li> </ol>"},{"location":"reference/architecture/#directory-structure","title":"Directory Structure","text":"<p>After installation, your project will have tool-specific directories:</p> Both ToolsOpenCode OnlyClaude Code Only <pre><code>your-project/\n\u251c\u2500\u2500 .context-harness/              # Shared session storage\n\u2502   \u251c\u2500\u2500 sessions/\n\u2502   \u2502   \u2514\u2500\u2500 {session-name}/\n\u2502   \u2502       \u2514\u2500\u2500 SESSION.md\n\u2502   \u251c\u2500\u2500 templates/\n\u2502   \u2502   \u2514\u2500\u2500 session-template.md\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 .opencode/                     # OpenCode configuration\n\u2502   \u251c\u2500\u2500 agent/\n\u2502   \u2502   \u251c\u2500\u2500 context-harness.md\n\u2502   \u2502   \u251c\u2500\u2500 compaction-guide.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts-subagent.md\n\u2502   \u2502   \u251c\u2500\u2500 docs-subagent.md\n\u2502   \u2502   \u2514\u2500\u2500 research-subagent.md\n\u2502   \u251c\u2500\u2500 command/\n\u2502   \u2502   \u251c\u2500\u2500 ctx.md\n\u2502   \u2502   \u251c\u2500\u2500 compact.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts.md\n\u2502   \u2502   \u251c\u2500\u2500 issue.md\n\u2502   \u2502   \u2514\u2500\u2500 pr.md\n\u2502   \u2514\u2500\u2500 skill/\n\u251c\u2500\u2500 .claude/                       # Claude Code configuration\n\u2502   \u251c\u2500\u2500 agents/\n\u2502   \u2502   \u251c\u2500\u2500 context-harness.md\n\u2502   \u2502   \u251c\u2500\u2500 compaction-guide.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts-subagent.md\n\u2502   \u2502   \u251c\u2500\u2500 docs-subagent.md\n\u2502   \u2502   \u2514\u2500\u2500 research-subagent.md\n\u2502   \u251c\u2500\u2500 commands/\n\u2502   \u2502   \u251c\u2500\u2500 ctx.md\n\u2502   \u2502   \u251c\u2500\u2500 compact.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts.md\n\u2502   \u2502   \u251c\u2500\u2500 issue.md\n\u2502   \u2502   \u2514\u2500\u2500 pr.md\n\u2502   \u2514\u2500\u2500 skills/\n\u251c\u2500\u2500 opencode.json                  # OpenCode config + MCP\n\u251c\u2500\u2500 .mcp.json                      # Claude Code MCP config\n\u251c\u2500\u2500 AGENTS.md                      # OpenCode memory file\n\u2514\u2500\u2500 CLAUDE.md                      # Claude Code memory file\n</code></pre> <pre><code>your-project/\n\u251c\u2500\u2500 .context-harness/\n\u2502   \u251c\u2500\u2500 sessions/\n\u2502   \u2502   \u2514\u2500\u2500 {session-name}/\n\u2502   \u2502       \u2514\u2500\u2500 SESSION.md\n\u2502   \u251c\u2500\u2500 templates/\n\u2502   \u2502   \u2514\u2500\u2500 session-template.md\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 .opencode/\n\u2502   \u251c\u2500\u2500 agent/\n\u2502   \u2502   \u251c\u2500\u2500 context-harness.md\n\u2502   \u2502   \u251c\u2500\u2500 compaction-guide.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts-subagent.md\n\u2502   \u2502   \u251c\u2500\u2500 docs-subagent.md\n\u2502   \u2502   \u2514\u2500\u2500 research-subagent.md\n\u2502   \u251c\u2500\u2500 command/\n\u2502   \u2502   \u251c\u2500\u2500 ctx.md\n\u2502   \u2502   \u251c\u2500\u2500 compact.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts.md\n\u2502   \u2502   \u251c\u2500\u2500 issue.md\n\u2502   \u2502   \u2514\u2500\u2500 pr.md\n\u2502   \u2514\u2500\u2500 skill/\n\u251c\u2500\u2500 opencode.json\n\u2514\u2500\u2500 AGENTS.md\n</code></pre> <pre><code>your-project/\n\u251c\u2500\u2500 .context-harness/\n\u2502   \u251c\u2500\u2500 sessions/\n\u2502   \u2502   \u2514\u2500\u2500 {session-name}/\n\u2502   \u2502       \u2514\u2500\u2500 SESSION.md\n\u2502   \u251c\u2500\u2500 templates/\n\u2502   \u2502   \u2514\u2500\u2500 session-template.md\n\u2502   \u2514\u2500\u2500 README.md\n\u251c\u2500\u2500 .claude/\n\u2502   \u251c\u2500\u2500 agents/\n\u2502   \u2502   \u251c\u2500\u2500 context-harness.md\n\u2502   \u2502   \u251c\u2500\u2500 compaction-guide.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts-subagent.md\n\u2502   \u2502   \u251c\u2500\u2500 docs-subagent.md\n\u2502   \u2502   \u2514\u2500\u2500 research-subagent.md\n\u2502   \u251c\u2500\u2500 commands/\n\u2502   \u2502   \u251c\u2500\u2500 ctx.md\n\u2502   \u2502   \u251c\u2500\u2500 compact.md\n\u2502   \u2502   \u251c\u2500\u2500 contexts.md\n\u2502   \u2502   \u251c\u2500\u2500 issue.md\n\u2502   \u2502   \u2514\u2500\u2500 pr.md\n\u2502   \u2514\u2500\u2500 skills/\n\u251c\u2500\u2500 .mcp.json\n\u2514\u2500\u2500 CLAUDE.md\n</code></pre> <p>Key Differences</p> Aspect OpenCode Claude Code Config folder <code>.opencode/</code> <code>.claude/</code> Folder naming singular (<code>agent/</code>, <code>command/</code>, <code>skill/</code>) plural (<code>agents/</code>, <code>commands/</code>, <code>skills/</code>) Memory file <code>AGENTS.md</code> <code>CLAUDE.md</code> MCP config <code>opencode.json</code> <code>.mcp.json</code>"},{"location":"reference/architecture/#subagents","title":"Subagents","text":""},{"location":"reference/architecture/#contexts-subagent","title":"@contexts-subagent","text":"<p>Handles session discovery and listing. When you run <code>/contexts</code>, this subagent scans all sessions, extracts metadata, and returns a formatted summary. Read-only\u2014does not execute.</p>"},{"location":"reference/architecture/#research-subagent","title":"@research-subagent","text":"<p>Provides grounded research guidance using Context7 MCP and web search for accurate, up-to-date API documentation, best practices, and implementation approaches. Advisory only\u2014does not execute.</p> <ul> <li>Context7 MCP Integration: Access to up-to-date documentation for popular libraries</li> <li>Web Search Verification: Real-time information lookup</li> <li>Grounded Responses: All research is cross-referenced and sourced</li> <li>Version Awareness: Tracks library versions and compatibility</li> </ul>"},{"location":"reference/architecture/#docs-subagent","title":"@docs-subagent","text":"<p>Provides documentation summaries, framework guides, and API references. Advisory only\u2014does not execute.</p>"},{"location":"reference/architecture/#compaction-guide","title":"@compaction-guide","text":"<p>Analyzes current work and recommends what to preserve during compaction. Advisory only\u2014does not execute.</p>"},{"location":"reference/architecture/#model-configuration","title":"Model Configuration","text":"<p>ContextHarness agents are model-agnostic. They do not specify a model, allowing you to use any provider and model supported by your tool.</p>"},{"location":"reference/architecture/#default-model","title":"Default Model","text":"OpenCodeClaude Code <p>Set your default model in <code>opencode.json</code>:</p> <pre><code>{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \"model\": \"anthropic/claude-sonnet-4-20250514\"\n}\n</code></pre> <p>Claude Code uses your Anthropic API configuration or Claude Pro subscription. Model selection is handled through Claude Code's settings.</p>"},{"location":"reference/architecture/#per-agent-configuration","title":"Per-Agent Configuration","text":"OpenCodeClaude Code <p>For different models per agent in <code>opencode.json</code>:</p> <pre><code>{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \"model\": \"anthropic/claude-sonnet-4-20250514\",\n  \"agent\": {\n    \"context-harness\": {\n      \"model\": \"anthropic/claude-opus-4-20250514\"\n    },\n    \"compaction-guide\": {\n      \"model\": \"anthropic/claude-haiku-4-20250514\"\n    }\n  }\n}\n</code></pre> <p>Claude Code does not support per-agent model configuration. All agents use the same model.</p>"},{"location":"reference/architecture/#model-loading-priority-opencode","title":"Model Loading Priority (OpenCode)","text":"<ol> <li>Command-line flag (<code>--model</code> or <code>-m</code>) - Highest priority</li> <li>Agent-specific config (<code>agent.{name}.model</code> in JSON)</li> <li>Default model (<code>model</code> key in <code>opencode.json</code>)</li> <li>Last used model (from previous session)</li> <li>Internal priority (first available model)</li> </ol>"},{"location":"reference/architecture/#context7-mcp-setup","title":"Context7 MCP Setup","text":"<p>The research and documentation subagents require Context7 MCP for accurate documentation lookup.</p>"},{"location":"reference/architecture/#basic-setup","title":"Basic Setup","text":"OpenCodeClaude Code <p>Add to <code>opencode.json</code>:</p> <pre><code>{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \"mcp\": {\n    \"context7\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.context7.com/mcp\"\n    }\n  }\n}\n</code></pre> <p>Add to <code>.mcp.json</code>:</p> <pre><code>{\n  \"mcpServers\": {\n    \"context7\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@upstash/context7-mcp\"]\n    }\n  }\n}\n</code></pre>"},{"location":"reference/architecture/#with-api-key","title":"With API Key","text":"<p>For higher rate limits:</p> OpenCodeClaude Code <pre><code>{\n  \"mcp\": {\n    \"context7\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.context7.com/mcp\",\n      \"headers\": {\n        \"CONTEXT7_API_KEY\": \"YOUR_API_KEY\"\n      },\n      \"enabled\": true\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"mcpServers\": {\n    \"context7\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@upstash/context7-mcp\"],\n      \"env\": {\n        \"CONTEXT7_API_KEY\": \"YOUR_API_KEY\"\n      }\n    }\n  }\n}\n</code></pre> <p>Sign up for a free API key at context7.com.</p>"},{"location":"reference/architecture/#customization","title":"Customization","text":"<p>All agent behaviors are defined in markdown files:</p> Agent Purpose Primary Agent (<code>context-harness.md</code>) Main executor, session management Contexts Subagent (<code>contexts-subagent.md</code>) Session discovery and listing Research Subagent (<code>research-subagent.md</code>) API lookups, best practices Docs Subagent (<code>docs-subagent.md</code>) Documentation summaries Compaction Guide (<code>compaction-guide.md</code>) Context preservation"},{"location":"reference/architecture/#code-architecture","title":"Code Architecture","text":""},{"location":"reference/architecture/#three-layer-pattern","title":"Three-Layer Pattern","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Interfaces Layer                       \u2502\n\u2502                                                             \u2502\n\u2502  CLI commands (Click)          SDK clients (future)         \u2502\n\u2502  skill_cmd.py, config_cmd.py  Handle user I/O only         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502 calls\n                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Services Layer                         \u2502\n\u2502                                                             \u2502\n\u2502  skill_service.py              config_service.py            \u2502\n\u2502  Business logic, orchestration                              \u2502\n\u2502  Returns Result[T] = Success[T] | Failure                   \u2502\n\u2502  Uses Protocol-based dependency injection                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502 operates on\n                           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Primitives Layer                         \u2502\n\u2502                                                             \u2502\n\u2502  Pure dataclasses: Skill, VersionComparison, RegistryRepo   \u2502\n\u2502  Enums: SkillSource, VersionStatus, RepoVisibility          \u2502\n\u2502  Result types: Success[T], Failure, ErrorCode               \u2502\n\u2502  No business logic \u2014 just data                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"reference/architecture/#skills-registry-architecture","title":"Skills Registry Architecture","text":"<p>The skills system uses a distributed registry model where repositories host skills and a CLI fetches them:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   CLI (ch skill ...)  \u2502\u2500\u2500\u2500\u2500\u25b6\u2502  GitHub Repository (skills registry) \u2502\n\u2502                      \u2502     \u2502                                      \u2502\n\u2502  \u2022 skill list        \u2502     \u2502  skills.json \u25c0\u2500\u2500 sync-registry.yml   \u2502\n\u2502  \u2022 skill install     \u2502     \u2502  skill/*/SKILL.md                    \u2502\n\u2502  \u2022 skill outdated    \u2502     \u2502  skill/*/version.txt \u25c0\u2500\u2500 release.yml \u2502\n\u2502  \u2022 skill upgrade     \u2502     \u2502                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Repositories scaffolded by <code>ch skill init-repo</code> include CI/CD automation:</p> <ul> <li>release-please manages per-skill <code>version.txt</code> and <code>CHANGELOG.md</code> via conventional commits</li> <li>sync-registry rebuilds <code>skills.json</code> from frontmatter + <code>version.txt</code> after each release</li> <li>validate-skills checks PR changes for schema compliance</li> </ul> <p>See Skills Guide for the full versioning lifecycle.</p> <p>Agent file locations:</p> OpenCodeClaude Code <pre><code>.opencode/agent/\n\u251c\u2500\u2500 context-harness.md\n\u251c\u2500\u2500 compaction-guide.md\n\u251c\u2500\u2500 contexts-subagent.md\n\u251c\u2500\u2500 docs-subagent.md\n\u2514\u2500\u2500 research-subagent.md\n</code></pre> <pre><code>.claude/agents/\n\u251c\u2500\u2500 context-harness.md\n\u251c\u2500\u2500 compaction-guide.md\n\u251c\u2500\u2500 contexts-subagent.md\n\u251c\u2500\u2500 docs-subagent.md\n\u2514\u2500\u2500 research-subagent.md\n</code></pre> <p>Command file locations:</p> OpenCodeClaude Code <pre><code>.opencode/command/\n\u251c\u2500\u2500 ctx.md          # Session switching with branch creation\n\u251c\u2500\u2500 compact.md      # Manual compaction\n\u251c\u2500\u2500 contexts.md     # List sessions\n\u251c\u2500\u2500 issue.md        # GitHub issue management\n\u2514\u2500\u2500 pr.md           # Pull request creation\n</code></pre> <pre><code>.claude/commands/\n\u251c\u2500\u2500 ctx.md          # Session switching with branch creation\n\u251c\u2500\u2500 compact.md      # Manual compaction\n\u251c\u2500\u2500 contexts.md     # List sessions\n\u251c\u2500\u2500 issue.md        # GitHub issue management\n\u2514\u2500\u2500 pr.md           # Pull request creation\n</code></pre>"},{"location":"reference/cli/","title":"CLI Reference","text":"<p>Complete reference for the ContextHarness command-line interface.</p> <p>Note: Both <code>ch</code> and <code>context-harness</code> commands work identically. Use <code>ch</code> for convenience.</p>"},{"location":"reference/cli/#installation","title":"Installation","text":"<pre><code># Install globally (recommended)\nuv tool install \"git+https://github.com/co-labs-co/context-harness.git\"\n\n# Or run without installing\nuvx --from \"git+https://github.com/co-labs-co/context-harness.git\" ch init\n</code></pre>"},{"location":"reference/cli/#core-commands","title":"Core Commands","text":""},{"location":"reference/cli/#init","title":"init","text":"<p>Initialize ContextHarness in a project.</p> <pre><code>ch init                       # Initialize for both tools (default)\nch init --force               # Overwrite existing files (preserves sessions/skills)\nch init --target ./path       # Install in specific directory\nch init --tool opencode       # Install for OpenCode only\nch init --tool claude-code    # Install for Claude Code only\nch init --tool both           # Install for both tools (explicit)\n</code></pre> <p>What it creates:</p> Both Tools (Default)OpenCode OnlyClaude Code Only <pre><code>your-project/\n\u251c\u2500\u2500 .contextignore            # Ignore patterns for context scanning\n\u251c\u2500\u2500 .context-harness/         # Session storage (shared)\n\u251c\u2500\u2500 .opencode/                # OpenCode configuration\n\u2502   \u251c\u2500\u2500 agent/\n\u2502   \u251c\u2500\u2500 command/\n\u2502   \u2514\u2500\u2500 skill/\n\u251c\u2500\u2500 .claude/                  # Claude Code configuration\n\u2502   \u251c\u2500\u2500 agents/\n\u2502   \u251c\u2500\u2500 commands/\n\u2502   \u2514\u2500\u2500 skills/\n\u251c\u2500\u2500 opencode.json             # OpenCode config + MCP\n\u251c\u2500\u2500 .mcp.json                 # Claude Code MCP config\n\u251c\u2500\u2500 AGENTS.md                 # OpenCode memory file\n\u2514\u2500\u2500 CLAUDE.md                 # Claude Code memory file\n</code></pre> <pre><code>your-project/\n\u251c\u2500\u2500 .contextignore            # Ignore patterns for context scanning\n\u251c\u2500\u2500 .context-harness/         # Session storage\n\u251c\u2500\u2500 .opencode/\n\u2502   \u251c\u2500\u2500 agent/\n\u2502   \u251c\u2500\u2500 command/\n\u2502   \u2514\u2500\u2500 skill/\n\u251c\u2500\u2500 opencode.json\n\u2514\u2500\u2500 AGENTS.md\n</code></pre> <pre><code>your-project/\n\u251c\u2500\u2500 .contextignore            # Ignore patterns for context scanning\n\u251c\u2500\u2500 .context-harness/         # Session storage\n\u251c\u2500\u2500 .claude/\n\u2502   \u251c\u2500\u2500 agents/\n\u2502   \u251c\u2500\u2500 commands/\n\u2502   \u2514\u2500\u2500 skills/\n\u251c\u2500\u2500 .mcp.json\n\u2514\u2500\u2500 CLAUDE.md\n</code></pre> <p>For more on ignore patterns, see the Ignore Patterns Guide.</p>"},{"location":"reference/cli/#mcp-configuration","title":"MCP Configuration","text":""},{"location":"reference/cli/#mcp-add","title":"mcp add","text":"<p>Add an MCP server. Writes to both <code>opencode.json</code> and <code>.mcp.json</code> when both tools are installed.</p> <pre><code>ch mcp add context7        # Add Context7 for docs lookup\nch mcp add context7 -k KEY # With API key for higher limits\n</code></pre> <p>Configuration format by tool:</p> OpenCode (opencode.json)Claude Code (.mcp.json) <pre><code>{\n  \"$schema\": \"https://opencode.ai/config.json\",\n  \"mcp\": {\n    \"context7\": {\n      \"type\": \"remote\",\n      \"url\": \"https://mcp.context7.com/mcp\"\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"mcpServers\": {\n    \"context7\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"@upstash/context7-mcp\"]\n    }\n  }\n}\n</code></pre>"},{"location":"reference/cli/#mcp-list","title":"mcp list","text":"<p>List configured MCP servers from all detected configuration files.</p> <pre><code>ch mcp list\n</code></pre> <p>Example output:</p> <pre><code>\ud83d\udce6 MCP Servers\n\nFrom opencode.json:\n  \u2022 context7 (remote)\n\nFrom .mcp.json:\n  \u2022 context7 (command: npx)\n</code></pre>"},{"location":"reference/cli/#skill-management","title":"Skill Management","text":""},{"location":"reference/cli/#skill-list","title":"skill list","text":"<p>List available skills from the registry.</p> <pre><code>ch skill list              # List all skills\nch skill list --tags react # Filter by tag\n</code></pre>"},{"location":"reference/cli/#skill-list-local","title":"skill list-local","text":"<p>List skills installed in the current project. Searches both <code>.opencode/skill/</code> and <code>.claude/skills/</code> directories.</p> <pre><code>ch skill list-local\n</code></pre>"},{"location":"reference/cli/#skill-info","title":"skill info","text":"<p>Show details for a specific skill.</p> <pre><code>ch skill info &lt;name&gt;\n</code></pre>"},{"location":"reference/cli/#skill-install","title":"skill install","text":"<p>Install a skill from the registry. Installs to all detected tool directories.</p> <pre><code>ch skill install           # Interactive picker\nch skill install &lt;name&gt;    # Install specific skill\n</code></pre> <p>Installation paths:</p> Both ToolsOpenCode OnlyClaude Code Only <p>Skills are installed to both directories:</p> <ul> <li><code>.opencode/skill/&lt;name&gt;/SKILL.md</code></li> <li><code>.claude/skills/&lt;name&gt;/SKILL.md</code></li> </ul> <ul> <li><code>.opencode/skill/&lt;name&gt;/SKILL.md</code></li> </ul> <ul> <li><code>.claude/skills/&lt;name&gt;/SKILL.md</code></li> </ul>"},{"location":"reference/cli/#skill-init-repo","title":"skill init-repo","text":"<p>Initialize a new skills registry repository on GitHub with fully automated CI/CD for per-skill semantic versioning. Creates 16 files including GitHub Actions workflows for release-please, PR validation, and registry sync.</p> <p>Prerequisite: GitHub CLI (<code>gh</code>) must be installed and authenticated (<code>gh auth login</code>).</p> <pre><code>ch skill init-repo my-skills                          # Create private repo\nch skill init-repo my-org/team-skills --public        # Create under an org, public\nch skill init-repo my-skills --configure-user         # Create and set as user default\nch skill init-repo my-skills --configure-project      # Create and set as project default\nch skill init-repo my-org/skills -d \"Team AI skills\"  # With custom description\n</code></pre> <p>What it creates:</p> <pre><code>my-skills/\n\u251c\u2500\u2500 .github/\n\u2502   \u251c\u2500\u2500 workflows/\n\u2502   \u2502   \u251c\u2500\u2500 release.yml              # release-please per-skill versioning\n\u2502   \u2502   \u251c\u2500\u2500 sync-registry.yml        # Rebuilds skills.json after releases\n\u2502   \u2502   \u2514\u2500\u2500 validate-skills.yml      # PR validation + sticky comments\n\u2502   \u251c\u2500\u2500 ISSUE_TEMPLATE/\n\u2502   \u2502   \u2514\u2500\u2500 new-skill.md\n\u2502   \u2514\u2500\u2500 PULL_REQUEST_TEMPLATE.md\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 sync-registry.py             # Frontmatter + version.txt \u2192 skills.json\n\u2502   \u2514\u2500\u2500 validate_skills.py           # Pydantic-based validation\n\u251c\u2500\u2500 skill/\n\u2502   \u2514\u2500\u2500 example-skill/\n\u2502       \u251c\u2500\u2500 SKILL.md\n\u2502       \u2514\u2500\u2500 version.txt              # Bootstrapped at 0.1.0\n\u251c\u2500\u2500 skills.json\n\u251c\u2500\u2500 release-please-config.json\n\u251c\u2500\u2500 .release-please-manifest.json\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 CONTRIBUTING.md\n\u2514\u2500\u2500 QUICKSTART.md\n</code></pre> <p>For details on the CI/CD automation and versioning lifecycle, see Automated Versioning.</p> <p>Options:</p> Flag Description <code>--private</code> / <code>--public</code> Repository visibility (default: <code>--private</code>) <code>-d</code>, <code>--description</code> Repository description <code>--configure-user</code> Set as default <code>skills-repo</code> in user config \u2014 applies to all projects (<code>~/.context-harness/config.json</code>) <code>--configure-project</code> Set as default <code>skills-repo</code> in project config \u2014 applies to this project only (<code>opencode.json</code>) <p>User vs Project Configuration</p> <p><code>--configure-user</code> writes to <code>~/.context-harness/config.json</code>, so every project on your machine uses this registry by default. <code>--configure-project</code> writes to <code>opencode.json</code> in the current directory, so only this project is affected. If neither flag is passed, the command prints <code>config set</code> instructions for both options.</p> <p>Name format:</p> Format Example Result <code>repo</code> <code>my-skills</code> Created under your personal GitHub account <code>owner/repo</code> <code>my-org/team-skills</code> Created under the specified organization <p>Exit codes:</p> Code Meaning 0 Success, or repository already exists 1 Error (auth failure, create failure)"},{"location":"reference/cli/#skill-extract","title":"skill extract","text":"<p>Export a local skill for sharing. Searches both tool directories.</p> <pre><code>ch skill extract           # Interactive picker\nch skill extract &lt;name&gt;    # Extract specific skill\n</code></pre>"},{"location":"reference/cli/#skill-outdated","title":"skill outdated","text":"<p>Check which installed skills have newer versions available in the registry.</p> <pre><code>ch skill outdated\n</code></pre> <p>Example output:</p> <pre><code>\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Skill           \u2503 Installed     \u2503 Latest        \u2503 Status              \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 react-forms     \u2502 0.1.0         \u2502 0.2.0         \u2502 upgrade available   \u2502\n\u2502 fastapi-crud    \u2502 1.0.0         \u2502 1.0.0         \u2502 up to date          \u2502\n\u2502 django-auth     \u2502 0.3.0         \u2502 0.3.1         \u2502 upgrade available   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>If a skill requires a newer version of ContextHarness than is currently installed, it is shown with status <code>incompatible</code>.</p>"},{"location":"reference/cli/#skill-upgrade","title":"skill upgrade","text":"<p>Upgrade one or all installed skills to the latest registry version.</p> <pre><code>ch skill upgrade &lt;name&gt;        # Upgrade a specific skill\nch skill upgrade --all         # Upgrade all outdated skills\nch skill upgrade &lt;name&gt; --force  # Upgrade even if version is incompatible\n</code></pre> <p>Options:</p> Flag Description <code>--all</code> Upgrade every installed skill that has a newer version <code>--force</code> Skip the <code>min_context_harness_version</code> compatibility check <p>Exit codes:</p> Code Meaning 0 Success (or already up to date) 1 Error (skill not found, network failure, incompatible version) <p>Incompatible Skills</p> <p>If a skill requires a newer version of ContextHarness, the upgrade is blocked and a message is shown. Run <code>pipx upgrade context-harness</code> (or <code>uv tool upgrade context-harness</code>) first, or use <code>--force</code> to override.</p>"},{"location":"reference/cli/#configuration-management","title":"Configuration Management","text":""},{"location":"reference/cli/#config-list","title":"config list","text":"<p>Show all configuration.</p> <pre><code>ch config list\n</code></pre>"},{"location":"reference/cli/#config-get","title":"config get","text":"<p>Get a specific configuration value.</p> <pre><code>ch config get skills-repo\n</code></pre>"},{"location":"reference/cli/#config-set","title":"config set","text":"<p>Set a configuration value.</p> OpenCodeClaude Code <pre><code># Project-level (in opencode.json)\nch config set skills-repo &lt;repo&gt;\n\n# User-level (in ~/.context-harness/config.json)\nch config set skills-repo &lt;repo&gt; --user\n</code></pre> <pre><code># Project-level (in .claude/settings.json)\nch config set skills-repo &lt;repo&gt;\n\n# User-level (in ~/.context-harness/config.json)\nch config set skills-repo &lt;repo&gt; --user\n</code></pre>"},{"location":"reference/cli/#config-unset","title":"config unset","text":"<p>Remove a configuration value.</p> <pre><code>ch config unset skills-repo\n</code></pre>"},{"location":"reference/cli/#shell-completion","title":"Shell Completion","text":""},{"location":"reference/cli/#bash","title":"Bash","text":"<p>Add to <code>~/.bashrc</code>:</p> <pre><code>eval \"$(_CH_COMPLETE=bash_source ch)\"\n</code></pre>"},{"location":"reference/cli/#zsh","title":"Zsh","text":"<p>Add to <code>~/.zshrc</code> (after <code>compinit</code>):</p> <pre><code>autoload -Uz compinit &amp;&amp; compinit\neval \"$(_CH_COMPLETE=zsh_source ch)\"\n</code></pre>"},{"location":"reference/cli/#fish","title":"Fish","text":"<p>Add to <code>~/.config/fish/completions/ch.fish</code>:</p> <pre><code>_CH_COMPLETE=fish_source ch | source\n</code></pre>"},{"location":"reference/cli/#exit-codes","title":"Exit Codes","text":"Code Meaning 0 Success 1 General error 2 Invalid arguments"},{"location":"user-guide/commands/","title":"Commands Reference","text":"<p>ContextHarness provides slash commands for use within OpenCode and Claude Code.</p> <p>Same Commands, Both Tools</p> <p>All ContextHarness commands work identically in both OpenCode and Claude Code. The commands are defined in tool-specific directories but provide the same functionality.</p>"},{"location":"user-guide/commands/#session-commands","title":"Session Commands","text":"Command Description Example <code>/ctx {name}</code> Create or switch to a session (creates git branch) <code>/ctx login-feature</code> <code>/contexts</code> List all sessions with status <code>/contexts</code> <code>/compact</code> Save current context to SESSION.md <code>/compact</code>"},{"location":"user-guide/commands/#ctx-name","title":"<code>/ctx {name}</code>","text":"<p>Creates or switches to a named session:</p> <pre><code>/ctx login-feature\n</code></pre> <p>What it does:</p> <ol> <li>Creates <code>.context-harness/sessions/login-feature/SESSION.md</code> (if new)</li> <li>Creates <code>feature/login-feature</code> branch (if <code>gh</code> available)</li> <li>Loads existing context if session exists</li> <li>Updates SESSION.md with GitHub Integration section</li> </ol>"},{"location":"user-guide/commands/#contexts","title":"<code>/contexts</code>","text":"<p>Lists all available sessions with metadata:</p> <pre><code>/contexts\n</code></pre> <p>Output:</p> <pre><code>\ud83d\udcc1 Available Sessions:\n- login-feature (Last: 2025-12-04, Status: In Progress)\n- TICKET-1234 (Last: 2025-12-03, Status: Completed)\n- api-rate-limiting (Last: 2025-12-02, Status: Blocked)\n</code></pre>"},{"location":"user-guide/commands/#compact","title":"<code>/compact</code>","text":"<p>Manually saves current context:</p> <pre><code>/compact\n</code></pre> <p>What it does:</p> <ol> <li>Invokes <code>@compaction-guide</code> for recommendations</li> <li>Updates SESSION.md with current state</li> <li>Preserves decisions, file changes, documentation</li> </ol> <p>Note</p> <p>Automatic compaction happens every 2nd user interaction, so manual <code>/compact</code> is usually not needed.</p>"},{"location":"user-guide/commands/#github-commands","title":"GitHub Commands","text":"Command Description Example <code>/issue</code> Create GitHub issue from current context <code>/issue</code> <code>/issue update</code> Add progress comment to linked issue <code>/issue update</code> <code>/pr</code> Create pull request for current branch <code>/pr</code>"},{"location":"user-guide/commands/#issue","title":"<code>/issue</code>","text":"<p>Creates a GitHub issue from session context:</p> <pre><code>/issue\n</code></pre> <p>What it does:</p> <ol> <li>Gathers context from SESSION.md</li> <li>Creates issue with <code>gh issue create</code></li> <li>Updates SESSION.md with issue link</li> </ol>"},{"location":"user-guide/commands/#issue-update","title":"<code>/issue update</code>","text":"<p>Adds a progress comment to the linked issue:</p> <pre><code>/issue update\n</code></pre>"},{"location":"user-guide/commands/#pr","title":"<code>/pr</code>","text":"<p>Creates a pull request:</p> <pre><code>/pr\n</code></pre> <p>What it does:</p> <ol> <li>Pushes current branch to origin</li> <li>Creates PR with <code>gh pr create</code></li> <li>Links to related issue (if exists)</li> <li>Updates SESSION.md with PR link</li> </ol> <p>Options:</p> <pre><code>/pr --draft              # Create as draft PR\n/pr --title \"Custom\"     # Use custom title\n/pr --base develop       # Target different base branch\n</code></pre>"},{"location":"user-guide/commands/#analysis-commands","title":"Analysis Commands","text":"Command Description Example <code>/baseline</code> Analyze project and generate PROJECT-CONTEXT.md + AGENTS.md <code>/baseline</code> <code>/baseline --path</code> Analyze specific directory (monorepo support) <code>/baseline --path apps/frontend</code> <code>/baseline --full</code> Force full regeneration <code>/baseline --full</code>"},{"location":"user-guide/commands/#baseline","title":"<code>/baseline</code>","text":"<p>Analyzes your project structure:</p> <pre><code>/baseline\n</code></pre> <p>What it does:</p> <ol> <li>Discovery: Analyzes directory structure, language, tools</li> <li>Question Generation: Creates 30-50 questions about the project</li> <li>Answer Generation: Answers questions using codebase analysis</li> <li>Skill Extraction: Identifies patterns for reusable skills</li> <li>Memory File Generation: Creates AI agent instructions</li> </ol> <p>Output:</p> OpenCodeClaude Code <ul> <li><code>PROJECT-CONTEXT.md</code> \u2014 Comprehensive project context</li> <li><code>AGENTS.md</code> \u2014 AI agent instructions (OpenCode rules file)</li> </ul> <ul> <li><code>PROJECT-CONTEXT.md</code> \u2014 Comprehensive project context</li> <li><code>CLAUDE.md</code> \u2014 AI agent instructions (Claude Code memory file)</li> </ul>"},{"location":"user-guide/commands/#baseline-path","title":"<code>/baseline --path</code>","text":"<p>Analyzes a specific directory within a monorepo:</p> <pre><code>/baseline --path apps/frontend\n</code></pre> <p>What it does:</p> <ol> <li>Scopes analysis to the target directory only</li> <li>Generates outputs in the target directory:</li> <li><code>apps/frontend/PROJECT-CONTEXT.md</code></li> <li><code>apps/frontend/AGENTS.md</code></li> <li>Creates self-contained AGENTS.md (no inheritance from root)</li> </ol> <p>Use cases:</p> <ul> <li>Monorepos with multiple projects (apps, packages, services)</li> <li>Polyglot repos where different directories use different languages</li> <li>Large repos where full analysis is too slow</li> </ul> <p>Examples:</p> <pre><code>/baseline --path apps/frontend      # Analyze frontend app\n/baseline --path packages/shared    # Analyze shared package\n/baseline --path services/api       # Analyze API service\n\n# Combine with other flags\n/baseline --path apps/web --skip-skills --verbose\n/baseline --path packages/ui --agents-only\n</code></pre> <p>AGENTS.md vs CLAUDE.md Precedence</p> <p>Both OpenCode and Claude Code read the nearest memory file in the directory tree. Per the AGENTS.md standard, nested files completely override root files (no merging). This is why <code>/baseline --path</code> generates self-contained memory files.</p> <p>Git Repository Recommended</p> <p>The <code>--path</code> flag uses git to find the repository root for shared skill placement. Skills are written to <code>{repo_root}/.opencode/skill/</code> so they can be shared across all projects in a monorepo.</p> <p>Without git: Skills are placed in the target directory instead, and skill references may need manual adjustment.</p>"},{"location":"user-guide/commands/#baseline-full","title":"<code>/baseline --full</code>","text":"<p>Forces complete regeneration, ignoring existing context:</p> <pre><code>/baseline --full\n</code></pre>"},{"location":"user-guide/ignore-patterns/","title":"Ignore Patterns","text":"<p>ContextHarness supports a <code>.contextignore</code> file for excluding files and directories from context scanning. This is useful for large projects with directories that don't need to be analyzed.</p>"},{"location":"user-guide/ignore-patterns/#overview","title":"Overview","text":"<p>The <code>.contextignore</code> file uses the same syntax as <code>.gitignore</code>. When you run <code>ch init</code>, an empty <code>.contextignore</code> template is created in your project root.</p>"},{"location":"user-guide/ignore-patterns/#default-patterns","title":"Default Patterns","text":"<p>ContextHarness automatically ignores common directories even without a <code>.contextignore</code> file:</p> Category Patterns Version Control <code>.git/</code>, <code>.svn/</code>, <code>.hg/</code> Dependencies <code>node_modules/</code>, <code>vendor/</code>, <code>.venv/</code>, <code>venv/</code>, <code>__pycache__/</code> Build Artifacts <code>dist/</code>, <code>build/</code>, <code>.next/</code>, <code>.nuxt/</code>, <code>out/</code>, <code>target/</code> Cache <code>.pytest_cache/</code>, <code>.mypy_cache/</code>, <code>.ruff_cache/</code>, <code>.cache/</code> IDE <code>.idea/</code>, <code>.vscode/</code> Lock Files <code>package-lock.json</code>, <code>yarn.lock</code>, <code>pnpm-lock.yaml</code>, <code>poetry.lock</code>, <code>uv.lock</code>"},{"location":"user-guide/ignore-patterns/#syntax","title":"Syntax","text":"<p>The <code>.contextignore</code> file follows <code>.gitignore</code> syntax:</p> <pre><code># Comments start with #\nnode_modules/          # Directory pattern (trailing slash)\n*.pyc                  # Wildcard pattern\n!important.pyc         # Negation (un-ignore)\n**/test_*.py           # Recursive wildcard\napps/legacy/           # Specific path\n</code></pre>"},{"location":"user-guide/ignore-patterns/#pattern-types","title":"Pattern Types","text":"Pattern Matches <code>foo/</code> Directory named <code>foo</code> and all contents <code>*.log</code> All files ending in <code>.log</code> <code>!keep.log</code> Exclude <code>keep.log</code> from being ignored <code>**/temp/</code> Any <code>temp/</code> directory at any depth <code>docs/*.md</code> Markdown files directly in <code>docs/</code>"},{"location":"user-guide/ignore-patterns/#examples","title":"Examples","text":""},{"location":"user-guide/ignore-patterns/#monorepo-with-multiple-apps","title":"Monorepo with Multiple Apps","text":"<p>Exclude apps you're not working on:</p> <pre><code># Ignore legacy app\napps/legacy-app/\n\n# Ignore deprecated packages\npackages/deprecated/\npackages/old-utils/\n\n# But keep the shared package\n!packages/shared/\n</code></pre>"},{"location":"user-guide/ignore-patterns/#large-generated-content","title":"Large Generated Content","text":"<p>Exclude generated files that inflate context:</p> <pre><code># Generated code\n.generated/\ncodegen/\n*.generated.ts\n\n# API clients\nsrc/api/generated/\n</code></pre>"},{"location":"user-guide/ignore-patterns/#test-data","title":"Test Data","text":"<p>Exclude large test fixtures:</p> <pre><code># Large test fixtures\ntests/fixtures/large/\ntest-data/\n__fixtures__/\n\n# But keep small fixtures\n!tests/fixtures/small/\n</code></pre>"},{"location":"user-guide/ignore-patterns/#documentation-sites","title":"Documentation Sites","text":"<p>Exclude built documentation:</p> <pre><code># Built docs\ndocs/_build/\nsite/\n.docusaurus/\n</code></pre>"},{"location":"user-guide/ignore-patterns/#vendored-dependencies","title":"Vendored Dependencies","text":"<p>Exclude third-party code copied into repo:</p> <pre><code>vendor/\nthird_party/\nexternal/\n</code></pre>"},{"location":"user-guide/ignore-patterns/#programmatic-usage","title":"Programmatic Usage","text":"<p>The <code>IgnoreService</code> can be used programmatically in Python:</p> <pre><code>from context_harness.services import IgnoreService\nfrom pathlib import Path\n\n# Load ignore configuration\nservice = IgnoreService()\nconfig = service.load_or_default(Path(\".\"))\n\n# Check if a path should be ignored\nif service.should_ignore(Path(\"node_modules/foo.js\"), config):\n    print(\"Ignoring node_modules/foo.js\")\n\n# Filter a list of paths\npaths = [Path(\"src/main.py\"), Path(\"node_modules/x.js\")]\nfiltered = service.filter_paths(paths, config)\n# Returns: [Path(\"src/main.py\")]\n\n# Get patterns for external tools\nresult = service.get_exclusion_patterns()\nif isinstance(result, Success):\n    for pattern in result.value:\n        print(f\"--exclude={pattern}\")\n</code></pre>"},{"location":"user-guide/ignore-patterns/#how-it-works","title":"How It Works","text":"<ol> <li>On <code>ch init</code>: A minimal <code>.contextignore</code> template is created</li> <li>On <code>/baseline</code>: The discovery phase respects ignore patterns</li> <li>Pattern matching: Uses the <code>pathspec</code> library for accurate gitignore-style matching</li> <li>Layered patterns: Default patterns are applied first, then your custom patterns</li> </ol>"},{"location":"user-guide/ignore-patterns/#tips","title":"Tips","text":"<ul> <li>Start minimal: Only add patterns when you notice context overload</li> <li>Use negation sparingly: <code>!</code> patterns can be confusing; prefer explicit includes</li> <li>Test patterns: Run <code>/baseline</code> and check what's included in PROJECT-CONTEXT.md</li> <li>Share patterns: Commit <code>.contextignore</code> so your team benefits</li> </ul>"},{"location":"user-guide/sessions/","title":"Sessions","text":"<p>Sessions are the core of ContextHarness. Each session maintains context for a specific feature or task.</p>"},{"location":"user-guide/sessions/#session-structure","title":"Session Structure","text":"<p>Each session is stored in its own directory:</p> <pre><code>.context-harness/sessions/\n\u251c\u2500\u2500 login-feature/\n\u2502   \u2514\u2500\u2500 SESSION.md\n\u251c\u2500\u2500 TICKET-1234/\n\u2502   \u2514\u2500\u2500 SESSION.md\n\u2514\u2500\u2500 api-refactor/\n    \u2514\u2500\u2500 SESSION.md\n</code></pre>"},{"location":"user-guide/sessions/#sessionmd-sections","title":"SESSION.md Sections","text":"Section Purpose Active Work Current task, status, blockers Key Files Files being modified with purposes Decisions Made Important decisions with rationale Documentation References Relevant docs with links Next Steps Prioritized action items Completed This Session Archived completed work GitHub Integration Branch, issue, and PR links"},{"location":"user-guide/sessions/#session-lifecycle","title":"Session Lifecycle","text":""},{"location":"user-guide/sessions/#1-creation","title":"1. Creation","text":"<p>When you run <code>/ctx my-feature</code>:</p> <ol> <li>Directory created at <code>.context-harness/sessions/my-feature/</code></li> <li>SESSION.md initialized from template</li> <li>Git branch <code>feature/my-feature</code> created (if <code>gh</code> available)</li> <li>Session becomes active</li> </ol>"},{"location":"user-guide/sessions/#2-active-work","title":"2. Active Work","text":"<p>During development:</p> <ul> <li>Files you modify are tracked in Key Files</li> <li>Important decisions are recorded in Decisions Made</li> <li>Documentation you reference is saved</li> </ul>"},{"location":"user-guide/sessions/#3-compaction","title":"3. Compaction","text":"<p>Every 2nd user interaction (or manual <code>/compact</code>):</p> <ol> <li><code>@compaction-guide</code> analyzes current state</li> <li>Recommends what to preserve</li> <li>SESSION.md is updated with latest context</li> </ol>"},{"location":"user-guide/sessions/#4-switching","title":"4. Switching","text":"<p>When you switch sessions with <code>/ctx other-feature</code>:</p> <ol> <li>Current session is saved</li> <li>New session is loaded</li> <li>Context is restored from SESSION.md</li> </ol>"},{"location":"user-guide/sessions/#naming-conventions","title":"Naming Conventions","text":"<p>Sessions can be named:</p> <ul> <li>Feature names: <code>login-feature</code>, <code>oauth-integration</code>, <code>dashboard-redesign</code></li> <li>Ticket IDs: <code>TICKET-1234</code>, <code>JIRA-567</code>, <code>GH-89</code></li> <li>Story IDs: <code>STORY-456</code>, <code>US-789</code></li> </ul>"},{"location":"user-guide/sessions/#github-integration","title":"GitHub Integration","text":"<p>When <code>gh</code> CLI is available, sessions integrate with GitHub:</p> <pre><code>## GitHub Integration\n\n**Branch**: feature/login-feature\n**Issue**: #65 - https://github.com/org/repo/issues/65\n**PR**: #72 - https://github.com/org/repo/pull/72\n</code></pre>"},{"location":"user-guide/sessions/#automatic-branch-creation","title":"Automatic Branch Creation","text":"<p><code>/ctx login-feature</code> creates branch <code>feature/login-feature</code></p>"},{"location":"user-guide/sessions/#issue-linking","title":"Issue Linking","text":"<p><code>/issue</code> creates an issue and links it to the session</p>"},{"location":"user-guide/sessions/#pr-creation","title":"PR Creation","text":"<p><code>/pr</code> creates a PR with context from the session</p>"},{"location":"user-guide/sessions/#best-practices","title":"Best Practices","text":"<ol> <li>One feature per session: Keep sessions focused on a single feature or task</li> <li>Use descriptive names: <code>user-authentication</code> is better than <code>feature1</code></li> <li>Compact before switching: Ensures context is saved</li> <li>Reference issues in names: <code>TICKET-1234</code> makes tracking easy</li> </ol>"},{"location":"user-guide/skills/","title":"Skills","text":"<p>Skills are pre-built patterns and workflows that extend the agent's capabilities.</p>"},{"location":"user-guide/skills/#what-are-skills","title":"What are Skills?","text":"<p>Skills are markdown files with YAML frontmatter that provide specialized knowledge and step-by-step guidance for specific tasks. When you load a skill, the agent gains access to detailed instructions for that domain.</p>"},{"location":"user-guide/skills/#using-skills","title":"Using Skills","text":""},{"location":"user-guide/skills/#list-available-skills","title":"List Available Skills","text":"<pre><code># List all skills from the registry\nch skill list\n\n# Filter by tag\nch skill list --tags react\nch skill list --tags python\n</code></pre>"},{"location":"user-guide/skills/#install-a-skill","title":"Install a Skill","text":"<pre><code># Interactive picker (recommended)\nch skill install\n\n# Install specific skill\nch skill install react-forms\n</code></pre> <p>Interactive picker:</p> <pre><code>? Select a skill to install: (Use arrow keys, type to filter)\n \u00bb react-forms - React form handling with validation\n   django-auth - Django authentication patterns\n   fastapi-crud - FastAPI CRUD patterns\n</code></pre> <p>Dual-Tool Installation</p> <p>When both OpenCode and Claude Code are configured, skills are automatically installed to both tool directories.</p>"},{"location":"user-guide/skills/#view-skill-details","title":"View Skill Details","text":"<pre><code>ch skill info react-forms\n</code></pre>"},{"location":"user-guide/skills/#list-installed-skills","title":"List Installed Skills","text":"<pre><code>ch skill list-local\n</code></pre> <p>This command searches both <code>.opencode/skill/</code> and <code>.claude/skills/</code> directories.</p>"},{"location":"user-guide/skills/#skill-structure","title":"Skill Structure","text":"<p>Skills are stored in tool-specific directories:</p> OpenCodeClaude CodeBoth Tools <pre><code>.opencode/skill/\n\u251c\u2500\u2500 react-forms/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u251c\u2500\u2500 fastapi-crud/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u2514\u2500\u2500 my-custom-skill/\n    \u2514\u2500\u2500 SKILL.md\n</code></pre> <pre><code>.claude/skills/\n\u251c\u2500\u2500 react-forms/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u251c\u2500\u2500 fastapi-crud/\n\u2502   \u2514\u2500\u2500 SKILL.md\n\u2514\u2500\u2500 my-custom-skill/\n    \u2514\u2500\u2500 SKILL.md\n</code></pre> <p>When both tools are installed, skills exist in both locations:</p> <pre><code>.opencode/skill/react-forms/SKILL.md\n.claude/skills/react-forms/SKILL.md\n</code></pre> <p>Each skill has YAML frontmatter:</p> <pre><code>---\nname: react-forms\ndescription: React form handling with validation\ntags:\n  - react\n  - forms\n  - validation\n---\n\n# React Forms Skill\n\nInstructions for the agent...\n</code></pre> <p>Version is NOT in Frontmatter</p> <p>Skill versions are managed by release-please via <code>version.txt</code> in each skill directory (see Automated Versioning below). Do not add a <code>version</code> field to the SKILL.md frontmatter \u2014 the CI validation workflow will flag it as an error.</p>"},{"location":"user-guide/skills/#creating-custom-skills","title":"Creating Custom Skills","text":""},{"location":"user-guide/skills/#1-create-the-skill-file","title":"1. Create the Skill File","text":"OpenCodeClaude Code <p>Create <code>.opencode/skill/my-skill/SKILL.md</code>:</p> <p><pre><code>---\nname: my-skill\ndescription: What this skill does\ntags:\n  - category\n---\n\n# My Skill\n\n## When to Use\n\nUse this skill when...\n\n## Instructions\n\n1. Step one\n2. Step two\n3. Step three\n\n## Examples\n\n```python\n# Example code\n</code></pre> ```</p> <p>Create <code>.claude/skills/my-skill/SKILL.md</code>:</p> <p><pre><code>---\nname: my-skill\ndescription: What this skill does\ntags:\n  - category\n---\n\n# My Skill\n\n## When to Use\n\nUse this skill when...\n\n## Instructions\n\n1. Step one\n2. Step two\n3. Step three\n\n## Examples\n\n```python\n# Example code\n</code></pre> ```</p> <p>Do Not Add <code>version</code> to Frontmatter</p> <p>If you plan to publish this skill to a registry with automated versioning, the <code>version</code> field must not appear in the frontmatter. Version is managed via <code>version.txt</code> (see Automated Versioning).</p> <p>Skill Content is Identical</p> <p>The skill file content is the same for both tools\u2014only the directory path differs.</p>"},{"location":"user-guide/skills/#2-extract-to-share","title":"2. Extract to Share","text":"<pre><code># Interactive picker\nch skill extract\n\n# Or specify skill name\nch skill extract my-skill\n</code></pre> <p>This generates a JSON file you can submit to a skills repository.</p>"},{"location":"user-guide/skills/#custom-skills-repository","title":"Custom Skills Repository","text":"<p>You can host your own skills registry instead of using the default <code>co-labs-co/context-harness-skills</code> repository. This is useful for organizations that want to share private skills across teams.</p>"},{"location":"user-guide/skills/#creating-a-registry-repository","title":"Creating a Registry Repository","text":"<p>The fastest way to get started is with the <code>init-repo</code> command, which creates a properly scaffolded GitHub repository:</p> <pre><code># Create a private registry under your personal account\nch skill init-repo my-skills\n\n# Create under an organization\nch skill init-repo my-org/team-skills\n\n# Create a public registry\nch skill init-repo my-org/team-skills --public\n\n# Create and configure as your default in one step\nch skill init-repo my-skills --configure-user\n</code></pre> <p>Prerequisite</p> <p>The GitHub CLI (<code>gh</code>) must be installed and authenticated. Run <code>gh auth login</code> if you haven't already.</p> <p>The command creates a fully scaffolded repository with CI/CD automation for per-skill semantic versioning:</p> <pre><code>my-skills/\n\u251c\u2500\u2500 .github/\n\u2502   \u251c\u2500\u2500 workflows/\n\u2502   \u2502   \u251c\u2500\u2500 release.yml                # release-please per-skill versioning\n\u2502   \u2502   \u251c\u2500\u2500 sync-registry.yml          # Rebuilds skills.json after releases\n\u2502   \u2502   \u2514\u2500\u2500 validate-skills.yml        # PR validation + sticky comments\n\u2502   \u251c\u2500\u2500 ISSUE_TEMPLATE/\n\u2502   \u2502   \u2514\u2500\u2500 new-skill.md               # Template for proposing new skills\n\u2502   \u2514\u2500\u2500 PULL_REQUEST_TEMPLATE.md       # PR checklist for contributors\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 sync-registry.py               # Parses frontmatter + version.txt \u2192 skills.json\n\u2502   \u2514\u2500\u2500 validate_skills.py             # Pydantic-based schema validation\n\u251c\u2500\u2500 skill/\n\u2502   \u2514\u2500\u2500 example-skill/\n\u2502       \u251c\u2500\u2500 SKILL.md                   # Example skill (no version in frontmatter)\n\u2502       \u2514\u2500\u2500 version.txt                # Bootstrapped at 0.1.0\n\u251c\u2500\u2500 skills.json                        # Registry manifest (auto-updated by CI)\n\u251c\u2500\u2500 release-please-config.json         # release-please configuration\n\u251c\u2500\u2500 .release-please-manifest.json      # Current versions (managed by CI)\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 README.md                          # Includes Mermaid lifecycle diagram\n\u251c\u2500\u2500 CONTRIBUTING.md                    # Contributor guide with conventional commits\n\u2514\u2500\u2500 QUICKSTART.md                      # Quick-start for adding your first skill\n</code></pre> <p>16 Files, Zero Manual Setup</p> <p>The scaffold creates 16 files \u2014 a complete GitHub repository with CI/CD that handles versioning, validation, and registry updates automatically. You just write skill content and use conventional commits.</p> <p>Once created, you can start adding skills to the repository. See Adding Skills to Your Registry below for the complete workflow.</p> <p>Auto-configuration options:</p> Flag Effect <code>--configure-user</code> Sets the new repo as your default <code>skills-repo</code> in <code>~/.context-harness/config.json</code> \u2014 applies to all projects on your machine <code>--configure-project</code> Sets the new repo as the project's <code>skills-repo</code> in <code>opencode.json</code> \u2014 applies to this project only <p>If you don't use either flag, the command prints manual <code>config set</code> instructions for both scopes.</p> <p>Which one should I use?</p> <p>Use <code>--configure-user</code> if you want every project on your machine to pull skills from this registry by default. Use <code>--configure-project</code> if only the current project should use it. Project-level config takes precedence over user-level config (see Configuration Precedence below).</p>"},{"location":"user-guide/skills/#configuration","title":"Configuration","text":"OpenCodeClaude Code <pre><code># Project-level (in opencode.json)\nch config set skills-repo my-org/my-skills-repo\n\n# User-level (in ~/.context-harness/config.json)\nch config set skills-repo my-org/my-skills-repo --user\n\n# Environment variable\nexport CONTEXT_HARNESS_SKILLS_REPO=my-org/private-skills\n</code></pre> <pre><code># Project-level (in .claude/settings.json)\nch config set skills-repo my-org/my-skills-repo\n\n# User-level (in ~/.context-harness/config.json)\nch config set skills-repo my-org/my-skills-repo --user\n\n# Environment variable\nexport CONTEXT_HARNESS_SKILLS_REPO=my-org/private-skills\n</code></pre>"},{"location":"user-guide/skills/#repository-structure","title":"Repository Structure","text":"<p>A skills registry repository follows this structure:</p> <pre><code>my-skills-repo/\n\u251c\u2500\u2500 .github/\n\u2502   \u2514\u2500\u2500 workflows/\n\u2502       \u251c\u2500\u2500 release.yml              # Automated per-skill releases\n\u2502       \u251c\u2500\u2500 sync-registry.yml        # Rebuilds skills.json post-release\n\u2502       \u2514\u2500\u2500 validate-skills.yml      # PR validation\n\u251c\u2500\u2500 scripts/\n\u2502   \u251c\u2500\u2500 sync-registry.py             # Registry builder script\n\u2502   \u2514\u2500\u2500 validate_skills.py           # Validation script\n\u251c\u2500\u2500 skill/                           # All skills live here\n\u2502   \u251c\u2500\u2500 my-skill/\n\u2502   \u2502   \u251c\u2500\u2500 SKILL.md                 # Skill content (no version in frontmatter)\n\u2502   \u2502   \u2514\u2500\u2500 version.txt              # Current version (managed by release-please)\n\u2502   \u2514\u2500\u2500 another-skill/\n\u2502       \u251c\u2500\u2500 SKILL.md\n\u2502       \u2514\u2500\u2500 version.txt\n\u251c\u2500\u2500 skills.json                      # Registry manifest (auto-generated)\n\u251c\u2500\u2500 release-please-config.json       # Versioning configuration\n\u251c\u2500\u2500 .release-please-manifest.json    # Version state\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 CONTRIBUTING.md\n\u2514\u2500\u2500 QUICKSTART.md\n</code></pre>"},{"location":"user-guide/skills/#skillsjson-format","title":"skills.json Format","text":"<p>The <code>skills.json</code> file is the registry manifest that the CLI fetches to discover available skills. It is auto-generated by the <code>sync-registry.yml</code> workflow \u2014 do not edit it by hand.</p> <pre><code>{\n  \"schema_version\": \"1.0\",\n  \"skills\": [\n    {\n      \"name\": \"my-skill\",\n      \"description\": \"What this skill does\",\n      \"version\": \"1.2.0\",\n      \"author\": \"your-username\",\n      \"tags\": [\"category\"],\n      \"path\": \"skill/my-skill\",\n      \"min_context_harness_version\": null,\n      \"content_hash\": \"a1b2c3d4e5f67890\"\n    }\n  ]\n}\n</code></pre> Field Description <code>name</code> Skill identifier (matches directory name) <code>description</code> From SKILL.md frontmatter <code>version</code> From <code>version.txt</code> (managed by release-please) <code>author</code> From SKILL.md frontmatter <code>tags</code> From SKILL.md frontmatter <code>path</code> Directory path in the repository <code>min_context_harness_version</code> From SKILL.md frontmatter (optional) <code>content_hash</code> SHA-256 prefix of SKILL.md for change detection"},{"location":"user-guide/skills/#automated-versioning","title":"Automated Versioning","text":"<p>Repositories scaffolded by <code>ch skill init-repo</code> use release-please for fully automated per-skill semantic versioning. Authors never touch version numbers \u2014 they write content and use conventional commits, and CI handles everything else.</p>"},{"location":"user-guide/skills/#how-it-works","title":"How It Works","text":"<pre><code>  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  1. Author edits SKILL.md           \u2502\n  \u2502     skill/my-skill/SKILL.md         \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  2. Commits with conventional msg   \u2502\n  \u2502     \"feat: add new examples\"        \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  3. PR merged to main               \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  4. release-please detects change   \u2502\n  \u2502     (path-based: skill/my-skill/*) \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  5. Creates release PR              \u2502\n  \u2502     Bumps version.txt + CHANGELOG   \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  6. Release PR merged               \u2502\n  \u2502     \u2192 Tag: my-skill@v1.1.0         \u2502\n  \u2502     \u2192 GitHub Release created        \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  7. sync-registry.yml fires         \u2502\n  \u2502     Rebuilds skills.json from all   \u2502\n  \u2502     version.txt files               \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u25bc\n  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  8. CLI users see update            \u2502\n  \u2502     ch skill outdated \u2192 upgrade     \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/skills/#conventional-commits-drive-versioning","title":"Conventional Commits Drive Versioning","text":"<p>The type of commit message determines the version bump for the affected skill:</p> Commit Message Version Bump Example <code>fix: correct typo in examples</code> Patch (1.0.0 \u2192 1.0.1) Bug fixes, typos <code>feat: add error handling patterns</code> Minor (1.0.0 \u2192 1.1.0) New content, sections <code>feat!: restructure skill format</code> Major (1.0.0 \u2192 2.0.0) Breaking changes <code>docs: update readme</code> None Non-skill documentation <code>chore: update CI config</code> None Maintenance <p>Path-Based Detection</p> <p>release-please attributes commits to skills based on which files they touch, not the commit scope. If you edit <code>skill/react-forms/SKILL.md</code>, release-please knows the <code>react-forms</code> skill was changed \u2014 you don't need to specify a scope in your commit message.</p>"},{"location":"user-guide/skills/#where-version-lives","title":"Where Version Lives","text":"Location Managed By Purpose <code>skill/{name}/version.txt</code> release-please (CI) Source of truth per skill <code>skill/{name}/CHANGELOG.md</code> release-please (CI) Auto-generated changelog <code>.release-please-manifest.json</code> release-please (CI) All current versions <code>skills.json</code> sync-registry.py (CI) Registry manifest the CLI fetches <p>Never Edit <code>version.txt</code> or <code>skills.json</code> by Hand</p> <p>Both are managed by CI. Manual edits will be overwritten on the next release or sync cycle.</p>"},{"location":"user-guide/skills/#cicd-workflows","title":"CI/CD Workflows","text":"<p>The scaffold includes three GitHub Actions workflows:</p>"},{"location":"user-guide/skills/#releaseyml-automated-releases","title":"<code>release.yml</code> \u2014 Automated Releases","text":"<p>Runs on every push to <code>main</code>. Uses <code>googleapis/release-please-action@v4</code> with:</p> <ul> <li><code>release-type: \"simple\"</code> \u2014 manages <code>version.txt</code> + <code>CHANGELOG.md</code> per skill</li> <li><code>include-component-in-tag: true</code> \u2014 tags like <code>my-skill@v1.1.0</code></li> <li><code>tag-separator: \"@\"</code> \u2014 separates skill name from version</li> <li><code>separate-pull-requests: true</code> \u2014 one release PR per skill</li> </ul>"},{"location":"user-guide/skills/#sync-registryyml-registry-updates","title":"<code>sync-registry.yml</code> \u2014 Registry Updates","text":"<p>Fires after a release is published. Runs <code>scripts/sync-registry.py</code> to:</p> <ol> <li>Scan all <code>skill/*/SKILL.md</code> files and parse frontmatter</li> <li>Read <code>version.txt</code> from each skill directory</li> <li>Compute content hashes for change detection</li> <li>Write the consolidated <code>skills.json</code></li> <li>Commit with <code>[skip ci]</code> to prevent infinite loops</li> </ol>"},{"location":"user-guide/skills/#validate-skillsyml-pr-validation","title":"<code>validate-skills.yml</code> \u2014 PR Validation","text":"<p>Runs on every PR that modifies files under <code>skill/</code>. Uses <code>scripts/validate_skills.py</code> (Pydantic-based) to:</p> <ol> <li>Check every skill has a valid <code>SKILL.md</code> with required frontmatter</li> <li>Verify <code>name</code> field matches directory name</li> <li>Ensure no <code>version</code> field exists in frontmatter</li> <li>Confirm <code>version.txt</code> exists and contains a valid semver string</li> <li>Check for duplicate skill names</li> <li>Post a sticky PR comment with the validation report (updates on each push)</li> </ol>"},{"location":"user-guide/skills/#adding-skills-to-your-registry","title":"Adding Skills to Your Registry","text":""},{"location":"user-guide/skills/#step-1-create-the-skill-directory","title":"Step 1: Create the Skill Directory","text":"<pre><code>mkdir -p skill/my-new-skill\n</code></pre>"},{"location":"user-guide/skills/#step-2-create-skillmd","title":"Step 2: Create SKILL.md","text":"<pre><code>---\nname: my-new-skill\ndescription: Brief description of what this skill does\nauthor: your-username\ntags:\n  - category\n  - subcategory\n---\n\n# My New Skill\n\n## When to Use\n\nUse this skill when...\n\n## Instructions\n\n1. Step one\n2. Step two\n\n## Examples\n\n```python\n# Example code\n```\n</code></pre> <p>No <code>version</code> Field</p> <p>Do not include <code>version</code> in the frontmatter. It is managed by <code>version.txt</code>.</p>"},{"location":"user-guide/skills/#step-3-create-versiontxt","title":"Step 3: Create version.txt","text":"<pre><code>echo \"0.1.0\" &gt; skill/my-new-skill/version.txt\n</code></pre> <p>Bootstrapping Required</p> <p>release-please will not create <code>version.txt</code> for you \u2014 it only bumps an existing file. You must bootstrap it at <code>0.1.0</code> (or your preferred starting version) when creating a new skill.</p>"},{"location":"user-guide/skills/#step-4-register-with-release-please","title":"Step 4: Register with release-please","text":"<p>Add the skill to both release-please configuration files:</p> <p><code>release-please-config.json</code> \u2014 add the package entry:</p> <pre><code>{\n  \"packages\": {\n    \"skill/my-new-skill\": {\n      \"release-type\": \"simple\",\n      \"component\": \"my-new-skill\"\n    }\n  }\n}\n</code></pre> <p><code>.release-please-manifest.json</code> \u2014 add the initial version:</p> <pre><code>{\n  \"skill/my-new-skill\": \"0.1.0\"\n}\n</code></pre>"},{"location":"user-guide/skills/#step-5-commit-and-push","title":"Step 5: Commit and Push","text":"<p>Use conventional commits to drive versioning:</p> <pre><code>git add skill/my-new-skill/ release-please-config.json .release-please-manifest.json\ngit commit -m \"feat: add my-new-skill\"\ngit push\n</code></pre> <p>After this PR is merged, release-please will create a release PR to bump the version. When that release PR is merged, the skill gets a scoped tag (<code>my-new-skill@v0.1.0</code>) and <code>skills.json</code> is automatically updated.</p>"},{"location":"user-guide/skills/#keeping-skills-up-to-date","title":"Keeping Skills Up to Date","text":""},{"location":"user-guide/skills/#check-for-updates","title":"Check for Updates","text":"<p>See which of your installed skills have newer versions available:</p> <pre><code>ch skill outdated\n</code></pre> <p>Example output:</p> <pre><code>\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2533\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2513\n\u2503 Skill           \u2503 Installed     \u2503 Latest        \u2503 Status              \u2503\n\u2521\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2547\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2529\n\u2502 react-forms     \u2502 0.1.0         \u2502 0.2.0         \u2502 upgrade available   \u2502\n\u2502 fastapi-crud    \u2502 1.0.0         \u2502 1.0.0         \u2502 up to date          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"user-guide/skills/#upgrade-skills","title":"Upgrade Skills","text":"<pre><code># Upgrade a single skill\nch skill upgrade react-forms\n\n# Upgrade all outdated skills at once\nch skill upgrade --all\n</code></pre>"},{"location":"user-guide/skills/#compatibility","title":"Compatibility","text":"<p>Skills can declare a minimum ContextHarness version they require via <code>min_context_harness_version</code> in their metadata. If your installed version is too old, the upgrade is blocked:</p> <pre><code>\u274c react-forms requires context-harness &gt;= 4.0.0 (you have 3.9.0)\n   Run: pipx upgrade context-harness\n   Or use --force to skip this check\n</code></pre> <p>Use <code>--force</code> to bypass the check if needed:</p> <pre><code>ch skill upgrade react-forms --force\n</code></pre>"},{"location":"user-guide/skills/#configuration-precedence","title":"Configuration Precedence","text":"<p>Skills repository is resolved in this order:</p> Priority Source Location 1 (Highest) Environment Variable <code>CONTEXT_HARNESS_SKILLS_REPO</code> 2 Project Config <code>opencode.json</code> \u2192 <code>skillsRegistry.default</code> 3 User Config <code>~/.context-harness/config.json</code> 4 (Lowest) Default Official skills repository"}]}